<!-- @page "/"
@using DonorWall.Data.Models
@using DonorWall.Data.Interfaces
@using DonorWall.Lookup.Extensions
@using DonorWall.Lookup.ViewModels
@using Microsoft.AspNetCore.Html

@inject IDonorRequestService DonorRequestService -->
<main class="body">
<!-- <EditForm Model="@Model" OnValidSubmit="@HandleValidSubmit" class="SearchKeyword_searchForm__3w8P0 container position-relative px-0 SearchKeyword_hasInfoText__1QZUj">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label for="Firstname" class="form-label">First Name</label>
        <InputText id="Firstname" @bind-Value="Model.Firstname" class="form-control" tabindex="1" />
    </div>
    <div class="mb-3">
        <label for="Lastname" class="form-label">Last Name</label>
        <InputText id="Lastname" @bind-Value="Model.Lastname" class="form-control" tabindex="2" />
    </div>
    <button type="submit" class="btn btn-primary" tabindex="3">Search</button>
</EditForm>-->
<form class="SearchKeyword_searchForm__3w8P0 container position-relative px-0 SearchKeyword_hasInfoText__1QZUj">
    <!--!--><!--!-->
    <div class="information">
      <div class="information__icon"><img class="icon_info" src="/src/assets/icon_info.svg"/></div>
      <div class="information__content">Search our donor database and display a donor's name on the clinic wall.</div>
    </div>

    <ul class="validation-errors"><li class="validation-message">The Firstname field is required.</li><li class="validation-message">Another thing</li></ul>

    <div class="form-input" b-4xg074dpd2=""><label for="Firstname" class="form-label" b-4xg074dpd2="">First Name</label>
      <input id="Firstname" tabindex="1" class="form-control valid" _bl_d065c7b3-854e-42b4-9c81-c7053e9be65a=""></div>
  <div class="form-input" b-4xg074dpd2=""><label for="Lastname" class="form-label" b-4xg074dpd2="">Last Name</label>
      <input id="Lastname" tabindex="2" class="form-control valid" _bl_2d78dbfc-e0c2-44f8-a188-7baa503e52ee=""></div>
  <button type="submit" class="btn btn-primary" tabindex="3" b-4xg074dpd2="">Search</button>
</form>
<!-- @if (Donors != null && Donors.Any())
{
    var index = 1; -->
    <section id="TW0j26c9iGNZvB1ewG6Y3" class="ls SectionGeneral_ls__1T3bE">
        <!-- @if (RequestCount > 0 && SelectedDonor?.Id > 0)
        { -->
            <div class="alert alert-success" role="alert">
                Donor @SelectedDonor.Firstname @SelectedDonor.Lastname has been queued for display.
                Your request is currently #@RequestCount in the queue.
            </div>
        <!-- } -->
        <h2 class="ls-header SectionIntro_headerText__24TpD mb-0">Search Results</h2>
        <div class="mb-2">Result Count: @Donors.Count()</div>
        <div>
            <table class="table table-bordered" style="z-index: 99999;">
                <tr class="table-header">
                    <th style="width: 5em;">#</th>
                    <th>Last Name</th>
                    <th>First Name</th>
                    <th>Organ</th>
                    <th>Transplant Date</th>
                    <th style="width: 8em;">Action</th>
                </tr>
                <!-- @foreach (var donor in Donors.OrderBy(x => x.Lastname).ThenBy(x => x.Firstname).ThenBy(x => x.TxpDate))
                { -->
                    <tr>
                        <td class="table-index">@index</td>
                        <td class="table-firstname">@donor.Firstname.ToEmbeddedHighlightString(Model.Firstname)</td>
                        <td class="table-lastname">@donor.Lastname.ToEmbeddedHighlightString(Model.Lastname)</td>
                        <td class="table-organ">@donor.Organ</td>
                        <td class="table-date">@donor.TxpDate.ToShortDateString()</td>
                        <td class="table-action"><input type="button" class="btn btn-primary" @onclick="@(e => SelectDonor(donor))" value="Feature @donor.Firstname on wall" /></td>
                    </tr>
                    <tr>
                      <td class="table-index">2</td>
                      <td class="table-firstname">Christopher</td>
                      <td class="table-lastname">HansonLee</td>
                      <td class="table-organ">Kidney</td>
                      <td class="table-date">09/21/1900</td>
                      <td class="table-action"><input type="button" class="btn btn-primary" @onclick="@(e => SelectDonor(donor))" value="Feature Christopher on wall" /></td>
                  </tr>
<!--
                    index++;
                } -->
            </table>
        </div>
    </section>
<!-- }
else
{ -->
    <section id="TW0j26c9iGNZvB1ewG6Y3" class="ls SectionGeneral_ls__1T3bE table-wrapper">
         <h2 class="ls-header SectionIntro_headerText__24TpD">Search Results</h2>
          <table class="table table-bordered">
             <tr class="table-header">
                 <th style="width: 5em;">#</th>
                 <th>Last Name</th>
                 <th>First Name</th>
                 <th>Organ</th>
                 <th>Transplant Date</th>
             </tr>
            <tr class="no-results">
                <td colspan="5">Cannot find any donors by that name. Please try again.</td>
            </tr>
         </table>
    </section>
<!-- } -->
  </main>
  <footer class="px-1">
    <div class="row">
      <div class="col-8 sm-col-12 align-items-center">
        <a href="https://uwhealth.org" class="pl-1">
          <img alt="UW Health Logo" src="//images.ctfassets.net/4yx69hifndy8/9CbsRSi2AJ5xqfEK3T7Dn/b500356767c466aee7c18f8edba48687/gfx_uwhealth-logo.svg" class="GlobalHeader_imgLogo__2k0M0">
        </a>
      </div>
      <div class="col-16 sm-col-12 align-items-center">
        <ul class="list-unstyled">
          <li><a href="https://www.uwhealth.org/services/transplant-service">Transplant Services</a></li>
          <li><a href="https://www.uwhealth.org/services/organ-tissue-donation">Organ and tissue donation</a></li>
          <li><a class="btn btn-primary" href="https://www.wiscmedicine.org/transplant">Support us</a></li>
        </ul>
      </div>
    </div>
  </footer>
  <div class="modal fade @modalActiveClass" id="exampleModalLive" aria-labelledby="exampleModalLiveLabel" style="display: block;" aria-modal="true" role="dialog">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title">Request Donor</h5>
              </div>
              <div class="modal-body">
                  <p>Would you like to request the following donor be queued for display on the donor wall?</p>
                  <label>First Name:</label>
                  <div>@SelectedDonor?.Firstname</div>
                  <label>Last Name:</label>
                  <div>@SelectedDonor?.Lastname</div>
                  <label>Organ:</label>
                  <div>@SelectedDonor?.Organ</div>
                  <label>Transplant Date:</label>
                  <div>@SelectedDonor?.TxpDate</div>
              </div>
              <div class="modal-footer">
                  <button type="button" @onclick="ResetDonor" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                  <button type="button" @onclick="RequestDonor" class="btn btn-success" data-bs-dismiss="modal">Request Donor</button>
              </div>
          </div>
      </div>
  </div>
  <div class="modal-backdrop fade @modalActiveClass"></div>
