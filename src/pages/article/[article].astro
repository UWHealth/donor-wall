---
import Layout from '$layouts/global.astro';
import ArticleView from '../../components/ArticleView.svelte';
import { items } from '$assets/content/stories.json';

export async function getStaticPaths() {

  return items.map((article, i) => {
    const {name, ...rest} = article;
    const [firstName, lastName] = name[0].split(' ');

    return {
      params: { article: `${i}` },
      props: {
        firstName, lastName, ...rest
      }
    }
  })
}

// const { article } = Astro.params;
const { firstName, title, lastName, intro, body, image, organ, year } = Astro.props;
const story = intro ? intro + body : body;
---

<Layout title={"Article View: " + firstName + lastName }>
  <ArticleView
    client:load
    firstName={firstName}
    lastName={lastName}
    organ={organ}
    year={year}
    image={image}
    title={title}
    story={story}
  />
</Layout>
