<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="~/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link href="css/site.css" rel="stylesheet" />
    <link href="DonorWall.Lookup.styles.css" rel="stylesheet" />
    <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />
</head>
<body>
  <EditForm Model="@Model" OnValidSubmit="@HandleValidSubmit" class="SearchKeyword_searchForm__3w8P0 container position-relative px-0 SearchKeyword_hasInfoText__1QZUj">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label for="Firstname" class="form-label">First Name</label>
        <InputText id="Firstname" @bind-Value="Model.Firstname" class="form-control" tabindex="1" />
    </div>
    <div class="mb-3">
        <label for="Lastname" class="form-label">Last Name</label>
        <InputText id="Lastname" @bind-Value="Model.Lastname" class="form-control" tabindex="2" />
    </div>
    <button type="submit" class="btn btn-primary" tabindex="3">Search</button>
</EditForm>
<!-- @if (Donors != null && Donors.Any())
{
    var index = 1; -->
    <section id="TW0j26c9iGNZvB1ewG6Y3" class="ls SectionGeneral_ls__1T3bE">
        <!-- @if (RequestCount > 0 && SelectedDonor?.Id > 0)
        { -->
            <div class="alert alert-success" role="alert">
                Donor @SelectedDonor.Firstname @SelectedDonor.Lastname has been queued for display.
                Your request is currently #@RequestCount in the queue.
            </div>
        <!-- } -->
        <h2 class="ls-header SectionIntro_headerText__24TpD mb-0">Search Results</h2>
        <div class="mb-2">Result Count: @Donors.Count()</div>
        <div>
            <table class="table table-bordered" style="z-index: 99999;">
                <tr>
                    <th style="width: 5em;">#</th>
                    <th>Last Name</th>
                    <th>First Name</th>
                    <th>Organ</th>
                    <th>Transplant Date</th>
                    <th style="width: 8em;">Action</th>
                </tr>
                <!-- @foreach (var donor in Donors.OrderBy(x => x.Lastname).ThenBy(x => x.Firstname).ThenBy(x => x.TxpDate))
                { -->
                    <tr>
                        <td>@index</td>
                        <td>@donor.Lastname.ToEmbeddedHighlightString(Model.Lastname)</td>
                        <td>@donor.Firstname.ToEmbeddedHighlightString(Model.Firstname)</td>
                        <td>@donor.Organ</td>
                        <td>@donor.TxpDate.ToShortDateString()</td>
                        <td><input type="button" class="btn btn-primary" @onclick="@(e => SelectDonor(donor))" value="Request" /></td>
                    </tr>
<!--
                    index++;
                } -->
            </table>
        </div>
    </section>
<!-- }
else
{ -->
    <section id="TW0j26c9iGNZvB1ewG6Y3" class="ls SectionGeneral_ls__1T3bE">
         <h2 class="ls-header SectionIntro_headerText__24TpD">Search Results</h2>
          <table class="table table-bordered">
             <tr>
                 <th style="width: 5em;">#</th>
                 <th>Last Name</th>
                 <th>First Name</th>
                 <th>Organ</th>
                 <th>Transplant Date</th>
             </tr>
            <tr>
                <td colspan="5">No Search Results</td>
            </tr>
         </table>
    </section>
<!-- } -->

    <div class="modal fade @modalActiveClass" id="exampleModalLive" aria-labelledby="exampleModalLiveLabel" style="display: block;" aria-modal="true" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Request Donor</h5>
                </div>
                <div class="modal-body">
                    <p>Would you like to request the following donor be queued for display on the donor wall?</p>
                    <label>First Name:</label>
                    <div>@SelectedDonor?.Firstname</div>
                    <label>Last Name:</label>
                    <div>@SelectedDonor?.Lastname</div>
                    <label>Organ:</label>
                    <div>@SelectedDonor?.Organ</div>
                    <label>Transplant Date:</label>
                    <div>@SelectedDonor?.TxpDate</div>
                </div>
                <div class="modal-footer">
                    <button type="button" @onclick="ResetDonor" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" @onclick="RequestDonor" class="btn btn-success" data-bs-dismiss="modal">Request Donor</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-backdrop fade @modalActiveClass"></div>

</body>
</html>
